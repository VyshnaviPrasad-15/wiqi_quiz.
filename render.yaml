# Render service configuration for the backend
# See https://render.com/docs/render-yaml for details.
services:
  - type: web
    name: wiqi-quiz-backend
    env: docker
    plan: free
    repo: https://github.com/VyshnaviPrasad-15/wiqi_quiz
    branch: master
    dockerfilePath: backend/Dockerfile
    buildCommand: ""
  # Use the $PORT env var to let Render assign the container port; if the Dockerfile provides
  # a CMD that binds to $PORT this field can be left blank. We set it explicitly here to be safe.
  startCommand: "gunicorn -k uvicorn.workers.UvicornWorker main:app --bind 0.0.0.0:$PORT --workers 2"
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: SENTRY_DSN
        sync: false
    healthCheckPath: /healthz
    autoDeploy: true

databases:
  - name: wiqi-quiz-db
    engine: postgres
    plan: starter
    branch: master
